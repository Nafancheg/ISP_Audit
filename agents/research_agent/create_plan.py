
import os

plan = """# План исправления проблем ISP_Audit

**Дата составления:** 2025-10-29  
**Автор:** Planning Agent (Claude Sonnet 4.5)  
**Бюджет времени:** ~7 часов (~170k токенов)

---

## Executive Summary

На основе аудита выявлено **14 проблем** различной критичности. План сфокусирован на исправлении критичных и высокоприоритетных проблем, которые напрямую влияют на корректность диагностики для пользователей.

**Ключевые фокусные области:**
1. Улучшение точности DNS-диагностики (устранение ложных срабатываний в корпоративных сетях)
2. Правильная интерпретация TCP-статусов (разделение портал vs лаунчер)
3. Добавление валидации TLS-сертификатов для детекции MITM
4. Исправление UDP-тестов (корректная интерпретация результатов)
5. Оптимизация производительности (параллельные TCP-проверки)

**Исключено из плана:** Traceroute и RST Heuristic (правильно отключены по умолчанию, низкая ценность для пользователей)

---

## Оценка времени и токенов

| Категория | Количество задач | Время (ч) | Токены |
|-----------|------------------|-----------|--------|
| **CRITICAL** | 4 | 3.0 | ~72k |
| **HIGH** | 4 | 2.5 | ~60k |
| **MEDIUM** | 3 | 1.5 | ~36k |
| **Тестирование** | - | 1.0 | ~24k |
| **ИТОГО** | 11 | **8.0** | **~192k** |

**Примечание:** План немного превышает бюджет (8 vs 7 часов). Рекомендуется начать с CRITICAL и HIGH задач, MEDIUM можно отложить на следующую сессию если времени не хватит.
"""

os.makedirs('agents/planning_agent', exist_ok=True)
with open('agents/planning_agent/plan.md', 'w', encoding='utf-8') as f:
    f.write(plan)
print('Plan header created')

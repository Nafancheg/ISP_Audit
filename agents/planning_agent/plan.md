# [BLUE] Planning Agent: –î–µ—Ç–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω –¥–ª—è E2E Testing + UX Polish

**–î–∞—Ç–∞:** 20 –Ω–æ—è–±—Ä—è 2025 –≥.  
**–í–µ—Ç–∫–∞:** feature/wpf-new-migration  
**–ó–∞–¥–∞—á–∞:** End-to-End Testing + UX Polish –¥–ª—è Exe-scenario  
**–°—Ç–∞—Ç—É—Å:** READY

---

## –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º

–ù–∞ –æ—Å–Ω–æ–≤–µ research_agent/findings.md –≤—ã—è–≤–ª–µ–Ω–æ 5 –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ–±–ª–µ–º:

1. **–ö–Ω–æ–ø–∫–∏ –ù–ï –±–ª–æ–∫–∏—Ä—É—é—Ç—Å—è** - IsRunning –≤—Å–µ–≥–¥–∞ false (ScreenState –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è –≤ Stage –º–µ—Ç–æ–¥–∞—Ö)
2. **MessageBox –ø—Ä–µ—Ä—ã–≤–∞—é—Ç flow** - Stage1‚Üí2 –∏ Stage2‚Üí3 —Ç—Ä–µ–±—É—é—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
3. **–ù–µ—Ç progress –≤ –ø—Ä–æ—Ü–µ–Ω—Ç–∞—Ö** - —Ç–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ —Å—Ç–∞—Ç—É—Å—ã
4. **–ù–µ—Ç –∫–Ω–æ–ø–∫–∏ "–°–±—Ä–æ—Å–∏—Ç—å"** - –Ω–µ–ª—å–∑—è –Ω–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ –±–µ–∑ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞
5. **CommandManager.InvalidateRequerySuggested –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è** - CanExecute –Ω–µ –ø–µ—Ä–µ–æ—Ü–µ–Ω–∏–≤–∞–µ—Ç—Å—è

---

## –ü–æ–¥–∑–∞–¥–∞—á–∞ 1: –î–æ–±–∞–≤–∏—Ç—å —Ñ–ª–∞–≥ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –∫–æ–º–∞–Ω–¥ –¥–ª—è Exe-scenario

**–§–∞–π–ª—ã:** 
- `ViewModels/MainViewModel.cs`

**–û–ø–∏—Å–∞–Ω–∏–µ:**
1. –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–∏–≤–∞—Ç–Ω–æ–µ –ø–æ–ª–µ `_isExeScenarioRunning` (bool, default false)
2. –ò–∑–º–µ–Ω–∏—Ç—å property `IsRunning` (—Å—Ç—Ä–æ–∫–∞ 126):
   ```csharp
   public bool IsRunning => ScreenState == "running" || _isExeScenarioRunning;
   ```
3. –í –Ω–∞—á–∞–ª–µ –∫–∞–∂–¥–æ–≥–æ Stage –º–µ—Ç–æ–¥–∞ (`RunStage1AnalyzeTrafficAsync`, `RunStage2DiagnoseAsync`, `RunStage3ApplyBypassAsync`):
   - –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É: `if (_isExeScenarioRunning) return;` (–∑–∞—â–∏—Ç–∞ –æ—Ç race condition)
   - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `_isExeScenarioRunning = true;`
   - –í—ã–∑–≤–∞—Ç—å `OnPropertyChanged(nameof(IsRunning));`
   - –í—ã–∑–≤–∞—Ç—å `CommandManager.InvalidateRequerySuggested();` (–∑–∞—Å—Ç–∞–≤–∏—Ç CanExecute –ø–µ—Ä–µ–æ—Ü–µ–Ω–∏—Ç—å—Å—è)
4. –í finally –±–ª–æ–∫–µ –∫–∞–∂–¥–æ–≥–æ Stage –º–µ—Ç–æ–¥–∞:
   - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `_isExeScenarioRunning = false;`
   - –í—ã–∑–≤–∞—Ç—å `OnPropertyChanged(nameof(IsRunning));`
   - –í—ã–∑–≤–∞—Ç—å `CommandManager.InvalidateRequerySuggested();`

**–í–∞–∂–Ω–æ:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å try-finally –¥–ª—è –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Å–±—Ä–æ—Å–∞ —Ñ–ª–∞–≥–∞ –¥–∞–∂–µ –ø—Ä–∏ –∏—Å–∫–ª—é—á–µ–Ω–∏—è—Ö

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** –Ω–µ—Ç

**–†–∏—Å–∫–∏:** 
- MessageBox —Å –æ—à–∏–±–∫–æ–π admin –ø—Ä–∞–≤ (—Å—Ç—Ä–æ–∫–∏ 1092-1098) –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –î–û —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Ñ–ª–∞–≥–∞
- –ù—É–∂–Ω–æ —É–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –ø—Ä–æ—Ñ–∏–ª—å–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π –Ω–µ —Å–ª–æ–º–∞–Ω (IsRunning –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –æ–±–æ–∏—Ö)

---

## –ü–æ–¥–∑–∞–¥–∞—á–∞ 2: –£–±—Ä–∞—Ç—å MessageBox –ø–µ—Ä–µ—Ö–æ–¥—ã –º–µ–∂–¥—É Stage

**–§–∞–π–ª—ã:**
- `ViewModels/MainViewModel.cs`

**–û–ø–∏—Å–∞–Ω–∏–µ:**
1. **–£–¥–∞–ª–∏—Ç—å** MessageBox –Ω–∞ —Å—Ç—Ä–æ–∫–∞—Ö 1216-1231 (Stage 1 ‚Üí Stage 2 transition):
   - –£–¥–∞–ª–∏—Ç—å –≤–µ—Å—å –±–ª–æ–∫ `var result = System.Windows.MessageBox.Show(...)`
   - –£–¥–∞–ª–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É `if (result == System.Windows.MessageBoxResult.Yes)`
   - –ó–∞–º–µ–Ω–∏—Ç—å –Ω–∞ –ø—Ä—è–º–æ–π –≤—ã–∑–æ–≤: `_ = RunStage2DiagnoseAsync();` (–∑–∞–ø—É—Å–∫–∞—Ç—å –≤—Å–µ–≥–¥–∞ –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ Stage1)

2. **–î–æ–±–∞–≤–∏—Ç—å —É—Å–ª–æ–≤–∏–µ** –ø–µ—Ä–µ–¥ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –∑–∞–ø—É—Å–∫–æ–º Stage2:
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å `if (Stage1HostsFound > 0)` - –∑–∞–ø—É—Å–∫–∞—Ç—å —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –µ—Å—Ç—å –∑–∞—Ö–≤–∞—á–µ–Ω–Ω—ã–µ —Ü–µ–ª–∏
   - –ï—Å–ª–∏ 0 —Ü–µ–ª–µ–π ‚Üí –æ—Å—Ç–∞–≤–∏—Ç—å MessageBox –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ (—Å—Ç—Ä–æ–∫–∏ 1169-1180, –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–π)

3. **–£–¥–∞–ª–∏—Ç—å** MessageBox –Ω–∞ —Å—Ç—Ä–æ–∫–∞—Ö 1368-1382 (Stage 2 ‚Üí Stage 3 transition):
   - –£–¥–∞–ª–∏—Ç—å –≤–µ—Å—å –±–ª–æ–∫ `var result = System.Windows.MessageBox.Show(...)`
   - –£–¥–∞–ª–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É `if (result == System.Windows.MessageBoxResult.Yes)`
   - –ó–∞–º–µ–Ω–∏—Ç—å –Ω–∞ –ø—Ä—è–º–æ–π –≤—ã–∑–æ–≤: `_ = RunStage3ApplyBypassAsync();` (–∑–∞–ø—É—Å–∫–∞—Ç—å –≤—Å–µ–≥–¥–∞ –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ Stage2)

4. **–î–æ–±–∞–≤–∏—Ç—å —É—Å–ª–æ–≤–∏–µ** –ø–µ—Ä–µ–¥ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –∑–∞–ø—É—Å–∫–æ–º Stage3:
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å `if (_detectedProblems != null && _detectedProblems.Any())` - –∑–∞–ø—É—Å–∫–∞—Ç—å —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –µ—Å—Ç—å –ø—Ä–æ–±–ª–µ–º—ã
   - –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º –Ω–µ—Ç ‚Üí –æ—Å—Ç–∞–≤–∏—Ç—å MessageBox –∏–Ω—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ (—Å—Ç—Ä–æ–∫–∏ 1392-1400)

5. **–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∫—Ä–∏—Ç–∏—á–Ω—ã–µ MessageBox**:
   - –°—Ç—Ä–æ–∫–∏ 1092-1098: admin –ø—Ä–∞–≤–∞ (–∫—Ä–∏—Ç–∏—á–Ω–æ)
   - –°—Ç—Ä–æ–∫–∏ 1169-1180: 0 —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π (–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ–µ)
   - –°—Ç—Ä–æ–∫–∏ 1276-1282: –ø—Ä–æ—Ñ–∏–ª—å –Ω–µ –∑–∞—Ö–≤–∞—á–µ–Ω (–æ—à–∏–±–∫–∞)
   - –°—Ç—Ä–æ–∫–∏ 1392-1400: –ø—Ä–æ–±–ª–µ–º –Ω–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–æ (–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ–µ)

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** –ø–æ—Å–ª–µ –ø–æ–¥–∑–∞–¥–∞—á–∏ 1 (–Ω—É–∂–Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∫–æ–º–∞–Ω–¥)

**–†–∏—Å–∫–∏:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ—Ö–æ–¥ –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–ª–∏—à–∫–æ–º –±—ã—Å—Ç—Ä—ã–º (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ —É—Å–ø–µ–µ—Ç –ø—Ä–æ—á–∏—Ç–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã Stage1)
- –†–µ—à–µ–Ω–∏–µ: –¥–æ–±–∞–≤–∏—Ç—å –∫–æ—Ä–æ—Ç–∫—É—é –∑–∞–¥–µ—Ä–∂–∫—É 500ms –ø–µ—Ä–µ–¥ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –ø–µ—Ä–µ—Ö–æ–¥–æ–º –∏–ª–∏ –æ—Å—Ç–∞–≤–∏—Ç—å –∫–∞–∫ –µ—Å—Ç—å

---

## –ü–æ–¥–∑–∞–¥–∞—á–∞ 3: –î–æ–±–∞–≤–∏—Ç—å progress –∏–Ω–¥–∏–∫–∞—Ü–∏—é –¥–ª—è Stage 1

**–§–∞–π–ª—ã:**
- `ViewModels/MainViewModel.cs`

**–û–ø–∏—Å–∞–Ω–∏–µ:**
1. –î–æ–±–∞–≤–∏—Ç—å —Å–≤–æ–π—Å—Ç–≤–æ `Stage1Progress` (int, 0-100):
   ```csharp
   private int _stage1Progress;
   public int Stage1Progress { 
       get => _stage1Progress; 
       set { _stage1Progress = value; OnPropertyChanged(); }
   }
   ```

2. –í –º–µ—Ç–æ–¥–µ `RunStage1AnalyzeTrafficAsync` (—Å—Ç—Ä–æ–∫–∏ 1077-1255):
   - –í –Ω–∞—á–∞–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `Stage1Progress = 0;`
   - TrafficAnalyzer.AnalyzeProcessTrafficAsync —É–∂–µ –∏–º–µ–µ—Ç 30-—Å–µ–∫—É–Ω–¥–Ω—ã–π timeout
   - –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å progress callback (—Å—Ç—Ä–æ–∫–∏ 1145-1149):
     ```csharp
     var progress = new Progress<string>(msg => {
         Dispatcher.InvokeAsync(() => {
             Stage1Status = msg;
             // –í—ã—á–∏—Å–ª–∏—Ç—å –ø—Ä–æ—Ü–µ–Ω—Ç –Ω–∞ –æ—Å–Ω–æ–≤–µ –≤—Ä–µ–º–µ–Ω–∏ (30 —Å–µ–∫ = 100%)
             // –ú–æ–∂–Ω–æ –ø–∞—Ä—Å–∏—Ç—å msg –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏, –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–∞–π–º–µ—Ä
             // –ü—Ä–∏–º–µ—Ä: –µ—Å–ª–∏ msg —Å–æ–¥–µ—Ä–∂–∏—Ç "... (15/30 —Å–µ–∫)" ‚Üí Stage1Progress = 50
         });
     });
     ```
   
3. **–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –ø–æ–¥—Ö–æ–¥** (–µ—Å–ª–∏ –ø–∞—Ä—Å–∏–Ω–≥ —Å–ª–æ–∂–Ω—ã–π):
   - –î–æ–±–∞–≤–∏—Ç—å `Stopwatch` –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏ –∑–∞—Ö–≤–∞—Ç–∞
   - –ó–∞–ø—É—Å—Ç–∏—Ç—å Task.Run —Å —Ç–∞–π–º–µ—Ä–æ–º –∫–∞–∂–¥—ã–µ 1 —Å–µ–∫—É–Ω–¥—É:
     ```csharp
     var sw = Stopwatch.StartNew();
     _ = Task.Run(async () => {
         while (sw.Elapsed.TotalSeconds < 30 && _isExeScenarioRunning) {
             var pct = (int)(sw.Elapsed.TotalSeconds / 30.0 * 100);
             await Dispatcher.InvokeAsync(() => Stage1Progress = pct);
             await Task.Delay(1000);
         }
     });
     ```

4. –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∑–∞—Ö–≤–∞—Ç–∞ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `Stage1Progress = 100;`

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** –ø–æ—Å–ª–µ –ø–æ–¥–∑–∞–¥–∞—á–∏ 1 (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç _isExeScenarioRunning)

**–†–∏—Å–∫–∏:** 
- TrafficAnalyzer.cs –ù–ï —Ç—Ä–æ–≥–∞—Ç—å (—Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ)
- Progress –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ—Ç–æ—á–Ω—ã–º (–∑–∞—Ö–≤–∞—Ç –º–æ–∂–µ—Ç –∑–∞–≤–µ—Ä—à–∏—Ç—å—Å—è —Ä–∞–Ω—å—à–µ 30 —Å–µ–∫)

---

## –ü–æ–¥–∑–∞–¥–∞—á–∞ 4: –î–æ–±–∞–≤–∏—Ç—å progress –∏–Ω–¥–∏–∫–∞—Ü–∏—é –¥–ª—è Stage 2

**–§–∞–π–ª—ã:**
- `ViewModels/MainViewModel.cs`

**–û–ø–∏—Å–∞–Ω–∏–µ:**
1. –î–æ–±–∞–≤–∏—Ç—å —Å–≤–æ–π—Å—Ç–≤–æ `Stage2Progress` (int, 0-100):
   ```csharp
   private int _stage2Progress;
   public int Stage2Progress { 
       get => _stage2Progress; 
       set { _stage2Progress = value; OnPropertyChanged(); }
   }
   ```

2. –í –º–µ—Ç–æ–¥–µ `RunStage2DiagnoseAsync` (—Å—Ç—Ä–æ–∫–∏ 1260-1408):
   - –í –Ω–∞—á–∞–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `Stage2Progress = 0;`
   - AuditRunner —É–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç IProgress<TestProgress> callback (—Å—Ç—Ä–æ–∫–∞ 1320)
   - –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å HandleTestProgress –¥–ª—è Stage2:
     ```csharp
     // –í HandleTestProgress –¥–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏–∫—É –¥–ª—è Exe-scenario
     if (_capturedProfile != null) { // Exe-scenario
         var totalTargets = _capturedProfile.Targets.Count;
         var completedTargets = TestResults.Count(r => r.Status != "TESTING");
         Stage2Progress = totalTargets > 0 ? (completedTargets * 100 / totalTargets) : 0;
     }
     ```

3. **–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –ø–æ–¥—Ö–æ–¥** (–µ—Å–ª–∏ HandleTestProgress –Ω–µ–ª—å–∑—è –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å):
   - –í progress callback (—Å—Ç—Ä–æ–∫–∏ 1320-1328) –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–¥—Å—á—ë—Ç:
     ```csharp
     var progress = new Progress<TestProgress>(p => {
         Dispatcher.InvokeAsync(() => {
             HandleTestProgress(p); // —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥
             // –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥—Å—á—ë—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
             if (_capturedProfile != null) {
                 var totalTargets = _capturedProfile.Targets.Count;
                 var completedTargets = TestResults.Count(r => r.Status != "TESTING");
                 Stage2Progress = totalTargets > 0 ? (completedTargets * 100 / totalTargets) : 0;
             }
         });
     });
     ```

4. –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `Stage2Progress = 100;`

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** –ø–æ—Å–ª–µ –ø–æ–¥–∑–∞–¥–∞—á–∏ 1

**–†–∏—Å–∫–∏:**
- HandleTestProgress –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∏ –¥–ª—è –ø—Ä–æ—Ñ–∏–ª—å–Ω–æ–≥–æ —Å—Ü–µ–Ω–∞—Ä–∏—è ‚Üí –Ω—É–∂–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ `if (_capturedProfile != null)`
- –ù–µ —Å–ª–æ–º–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π

---

## –ü–æ–¥–∑–∞–¥–∞—á–∞ 5: –î–æ–±–∞–≤–∏—Ç—å progress –∏–Ω–¥–∏–∫–∞—Ü–∏—é –¥–ª—è Stage 3

**–§–∞–π–ª—ã:**
- `ViewModels/MainViewModel.cs`

**–û–ø–∏—Å–∞–Ω–∏–µ:**
1. –î–æ–±–∞–≤–∏—Ç—å —Å–≤–æ–π—Å—Ç–≤–æ `Stage3Progress` (int, 0-100):
   ```csharp
   private int _stage3Progress;
   public int Stage3Progress { 
       get => _stage3Progress; 
       set { _stage3Progress = value; OnPropertyChanged(); }
   }
   ```

2. –í –º–µ—Ç–æ–¥–µ `RunStage3ApplyBypassAsync` (—Å—Ç—Ä–æ–∫–∏ 1413-1493):
   - –í –Ω–∞—á–∞–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `Stage3Progress = 0;`
   - Stage3 —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –¥–≤—É—Ö –æ–ø–µ—Ä–∞—Ü–∏–π:
     1. DNS fix (–µ—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è) - 70% –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
     2. WinDivert bypass (–µ—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è) - 30% –ø—Ä–æ–≥—Ä–µ—Å—Å–∞

3. **DNS fix** (—Å—Ç—Ä–æ–∫–∏ 1436-1453):
   - –ü–µ—Ä–µ–¥ –≤—ã–∑–æ–≤–æ–º —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `Stage3Progress = 10;`
   - DnsFixApplicator.ApplyDnsFixAsync –∏—Å–ø–æ–ª—å–∑—É–µ—Ç IProgress<string> (—Å—Ç—Ä–æ–∫–∞ 1437)
   - –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å progress callback:
     ```csharp
     var dnsProgress = new Progress<string>(msg => {
         Dispatcher.InvokeAsync(() => {
             Stage3Status = msg;
             // DNS fix —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç 3 –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ (Cloudflare, Google, Quad9)
             // –ü–∞—Ä—Å–∏—Ç—å msg –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
             if (msg.Contains("–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ") || msg.Contains("1.1.1.1")) Stage3Progress = 20;
             if (msg.Contains("8.8.8.8")) Stage3Progress = 40;
             if (msg.Contains("9.9.9.9")) Stage3Progress = 60;
             if (msg.Contains("—É—Å–ø–µ—à–Ω–æ –ø—Ä–∏–º–µ–Ω–µ–Ω")) Stage3Progress = 70;
         });
     });
     ```

4. **WinDivert bypass** (—Å—Ç—Ä–æ–∫–∏ 1456-1488):
   - –ü–µ—Ä–µ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º JSON —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `Stage3Progress = 80;`
   - –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `Stage3Progress = 100;`

5. **–ï—Å–ª–∏ —Ç–æ–ª—å–∫–æ DNS fix –∏–ª–∏ —Ç–æ–ª—å–∫–æ WinDivert**:
   - –ï—Å–ª–∏ —Ç–æ–ª—å–∫–æ DNS ‚Üí 0-100%
   - –ï—Å–ª–∏ —Ç–æ–ª—å–∫–æ WinDivert ‚Üí —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å—Ä–∞–∑—É 50%, –∑–∞—Ç–µ–º 100%

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** –ø–æ—Å–ª–µ –ø–æ–¥–∑–∞–¥–∞—á–∏ 1

**–†–∏—Å–∫–∏:**
- DnsFixApplicator.cs –ù–ï —Ç—Ä–æ–≥–∞—Ç—å (—Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ)
- Progress –ø–∞—Ä—Å–∏–Ω–≥ –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ—Ç–æ—á–Ω—ã–º (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ç–µ–∫—Å—Ç–∞ —Å–æ–æ–±—â–µ–Ω–∏–π)

---

## –ü–æ–¥–∑–∞–¥–∞—á–∞ 6: –î–æ–±–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫—É "–°–±—Ä–æ—Å–∏—Ç—å" –∏ –∫–æ–º–∞–Ω–¥—É

**–§–∞–π–ª—ã:**
- `ViewModels/MainViewModel.cs`

**–û–ø–∏—Å–∞–Ω–∏–µ:**
1. –î–æ–±–∞–≤–∏—Ç—å –∫–æ–º–∞–Ω–¥—É `ResetExeScenarioCommand` (RelayCommand):
   ```csharp
   public ICommand ResetExeScenarioCommand { get; }
   
   // –í –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–µ (—Ä—è–¥–æ–º —Å–æ —Å—Ç—Ä–æ–∫–æ–π 315):
   ResetExeScenarioCommand = new RelayCommand(_ => ResetExeScenario(), 
       _ => (Stage1Complete || Stage2Complete || Stage3Complete) && !IsRunning);
   ```

2. –°–æ–∑–¥–∞—Ç—å –º–µ—Ç–æ–¥ `ResetExeScenario()`:
   ```csharp
   private void ResetExeScenario()
   {
       // –°–±—Ä–æ—Å–∏—Ç—å captured data
       _capturedProfile = null;
       _detectedProblems = null;
       _plannedBypass = null;
       
       // –°–±—Ä–æ—Å–∏—Ç—å —Ñ–ª–∞–≥–∏
       Stage1Complete = false;
       Stage2Complete = false;
       Stage3Complete = false;
       
       // –°–±—Ä–æ—Å–∏—Ç—å —Å—á—ë—Ç—á–∏–∫–∏
       Stage1HostsFound = 0;
       Stage2ProblemsFound = 0;
       
       // –°–±—Ä–æ—Å–∏—Ç—å —Å—Ç–∞—Ç—É—Å—ã
       Stage1Status = "";
       Stage2Status = "";
       Stage3Status = "";
       
       // –°–±—Ä–æ—Å–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å
       Stage1Progress = 0;
       Stage2Progress = 0;
       Stage3Progress = 0;
       
       // –û—á–∏—Å—Ç–∏—Ç—å TestResults
       TestResults.Clear();
       
       // –°–±—Ä–æ—Å–∏—Ç—å ExePath –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –∑–∞—Ö–æ—Ç–µ—Ç—å –æ—Å—Ç–∞–≤–∏—Ç—å)
       // ExePath = "";
       
       // –ü–µ—Ä–µ–æ—Ü–µ–Ω–∏—Ç—å –∫–æ–º–∞–Ω–¥—ã
       CommandManager.InvalidateRequerySuggested();
   }
   ```

3. **–ù–µ —Å–±—Ä–∞—Å—ã–≤–∞—Ç—å ExePath** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –∑–∞—Ö–æ—Ç–µ—Ç—å –∑–∞–ø—É—Å—Ç–∏—Ç—å –∞–Ω–∞–ª–∏–∑ –ø–æ–≤—Ç–æ—Ä–Ω–æ –¥–ª—è —Ç–æ–≥–æ –∂–µ EXE

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** –ø–æ—Å–ª–µ –ø–æ–¥–∑–∞–¥–∞—á–∏ 3, 4, 5 (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç Stage*Progress properties)

**–†–∏—Å–∫–∏:** –Ω–µ—Ç

---

## –ü–æ–¥–∑–∞–¥–∞—á–∞ 7: –û–±–Ω–æ–≤–∏—Ç—å XAML –¥–ª—è progress bars –∏ –∫–Ω–æ–ø–∫–∏ Reset

**–§–∞–π–ª—ã:**
- `MainWindow.xaml`

**–û–ø–∏—Å–∞–Ω–∏–µ:**
1. **Stage 1 section** (–ø—Ä–∏–º–µ—Ä–Ω–æ —Å—Ç—Ä–æ–∫–∏ 300-340):
   - –ù–∞–π—Ç–∏ TextBlock `Stage1Status`
   - –î–æ–±–∞–≤–∏—Ç—å –ü–û–°–õ–ï –Ω–µ–≥–æ ProgressBar:
     ```xaml
     <ProgressBar 
         Value="{Binding Stage1Progress}" 
         Height="4" 
         Margin="0,8,0,0"
         Visibility="{Binding Stage1Complete, Converter={StaticResource BoolToVisibilityConverter}, 
                      ConverterParameter=Inverse}"/>
     ```
   - ProgressBar –¥–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å—Å—è —Ç–æ–ª—å–∫–æ –ø–æ–∫–∞ Stage1 –ù–ï –∑–∞–≤–µ—Ä—à—ë–Ω

2. **Stage 2 section** (–ø—Ä–∏–º–µ—Ä–Ω–æ —Å—Ç—Ä–æ–∫–∏ 360-390):
   - –ù–∞–π—Ç–∏ TextBlock `Stage2Status` –∏–ª–∏ –µ–≥–æ –∞–Ω–∞–ª–æ–≥
   - –î–æ–±–∞–≤–∏—Ç—å –ü–û–°–õ–ï –Ω–µ–≥–æ ProgressBar:
     ```xaml
     <ProgressBar 
         Value="{Binding Stage2Progress}" 
         Height="4" 
         Margin="0,8,0,0"
         Visibility="{Binding Stage2Complete, Converter={StaticResource BoolToVisibilityConverter}, 
                      ConverterParameter=Inverse}"/>
     ```

3. **Stage 3 section** (–ø—Ä–∏–º–µ—Ä–Ω–æ —Å—Ç—Ä–æ–∫–∏ 405-435):
   - –ù–∞–π—Ç–∏ TextBlock `Stage3Status` –∏–ª–∏ –µ–≥–æ –∞–Ω–∞–ª–æ–≥
   - –î–æ–±–∞–≤–∏—Ç—å –ü–û–°–õ–ï –Ω–µ–≥–æ ProgressBar:
     ```xaml
     <ProgressBar 
         Value="{Binding Stage3Progress}" 
         Height="4" 
         Margin="0,8,0,0"
         Visibility="{Binding Stage3Complete, Converter={StaticResource BoolToVisibilityConverter}, 
                      ConverterParameter=Inverse}"/>
     ```

4. **–ö–Ω–æ–ø–∫–∞ "–°–±—Ä–æ—Å–∏—Ç—å"** (–¥–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ–Ω–µ—Ü Exe-scenario —Å–µ–∫—Ü–∏–∏):
   - –ù–∞–π—Ç–∏ –ø–æ–¥—Ö–æ–¥—è—â–µ–µ –º–µ—Å—Ç–æ (–≤–µ—Ä–æ—è—Ç–Ω–æ, –ø–æ—Å–ª–µ –∫–Ω–æ–ø–∫–∏ Stage3 "–ü—Ä–∏–º–µ–Ω–∏—Ç—å –æ–±—Ö–æ–¥")
   - –î–æ–±–∞–≤–∏—Ç—å Button:
     ```xaml
     <Button 
         Content="üîÑ –°–±—Ä–æ—Å–∏—Ç—å –∏ –Ω–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ"
         Command="{Binding ResetExeScenarioCommand}"
         Style="{StaticResource MaterialDesignOutlinedButton}"
         Margin="0,16,0,0"
         HorizontalAlignment="Left"/>
     ```
   - Command.CanExecute –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç IsEnabled

5. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ BoolToVisibilityConverter**:
   - –ï—Å–ª–∏ –Ω–µ—Ç ‚Üí –¥–æ–±–∞–≤–∏—Ç—å –≤ App.xaml –∏–ª–∏ MainWindow.xaml Resources
   - –ï—Å–ª–∏ –µ—Å—Ç—å ‚Üí –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** –ø–æ—Å–ª–µ –ø–æ–¥–∑–∞–¥–∞—á–∏ 3, 4, 5, 6

**–†–∏—Å–∫–∏:**
- BoolToVisibilityConverter –º–æ–∂–µ—Ç –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å ConverterParameter=Inverse
- –ï—Å–ª–∏ –Ω–µ—Ç ‚Üí –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å InverseBoolToVisibilityConverter –∏–ª–∏ —Å–æ–∑–¥–∞—Ç—å —Å–≤–æ–π

---

## –ü–æ–¥–∑–∞–¥–∞—á–∞ 8: –°–æ–∑–¥–∞—Ç—å E2E Test Checklist

**–§–∞–π–ª—ã:**
- `docs/e2e_test_checklist.md` (—Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —Ñ–∞–π–ª)

**–û–ø–∏—Å–∞–Ω–∏–µ:**
–°–æ–∑–¥–∞—Ç—å –¥–µ—Ç–∞–ª—å–Ω—ã–π —á–µ–∫–ª–∏—Å—Ç –¥–ª—è —Ä—É—á–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è Exe-scenario —Å 15-20 —à–∞–≥–∞–º–∏.

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞:**

```markdown
# E2E Test Checklist –¥–ª—è Exe-scenario

## –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞

1. [ ] –°–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞—Ç—å ISP_Audit –≤ Release —Ä–µ–∂–∏–º–µ
2. [ ] –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å TestNetworkApp.exe (–∏–∑ –ø–∞–ø–∫–∏ TestNetworkApp/)
3. [ ] –ó–∞–ø—É—Å—Ç–∏—Ç—å TestNetworkApp.exe –∏ —É–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –æ–Ω –¥–µ–ª–∞–µ—Ç —Å–µ—Ç–µ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã
4. [ ] –û—Ç–∫—Ä—ã—Ç—å ISP_Audit GUI

## –¢–µ—Å—Ç 1: –£—Å–ø–µ—à–Ω—ã–π full flow (Stage 1 ‚Üí 2 ‚Üí 3)

5. [ ] –í—ã–±—Ä–∞—Ç—å "–ê–Ω–∞–ª–∏–∑ EXE —Ñ–∞–π–ª–∞" —Å—Ü–µ–Ω–∞—Ä–∏–π
6. [ ] –ù–∞–∂–∞—Ç—å "–û–±–∑–æ—Ä" –∏ –≤—ã–±—Ä–∞—Ç—å TestNetworkApp.exe
7. [ ] –ù–∞–∂–∞—Ç—å "Analyze Traffic" ‚Üí –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –∫–Ω–æ–ø–∫–∞ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–ª–∞—Å—å
8. [ ] –ù–∞–±–ª—é–¥–∞—Ç—å progress bar Stage1 (0-100%)
9. [ ] –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –Ω–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫—É "Analyze" –ø–æ–≤—Ç–æ—Ä–Ω–æ ‚Üí –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞
10. [ ] –î–æ–∂–¥–∞—Ç—å—Å—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è Stage1 (30 —Å–µ–∫) ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è Stage2
11. [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –ù–ï–¢ MessageBox "–ü–µ—Ä–µ–π—Ç–∏ –∫ Stage 2?" (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ—Ö–æ–¥)
12. [ ] –ù–∞–±–ª—é–¥–∞—Ç—å progress bar Stage2 –∏ —Å—Ç–∞—Ç—É—Å—ã —Ç–µ—Å—Ç–æ–≤
13. [ ] –î–æ–∂–¥–∞—Ç—å—Å—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è Stage2 ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è Stage3
14. [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –ù–ï–¢ MessageBox "–ü–µ—Ä–µ–π—Ç–∏ –∫ Stage 3?" (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ—Ö–æ–¥)
15. [ ] –ù–∞–±–ª—é–¥–∞—Ç—å progress bar Stage3 –∏ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π
16. [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ Stage3 –∑–∞–≤–µ—Ä—à–∏–ª—Å—è –∏ –ø–æ–∫–∞–∑–∞–Ω–∞ –∫–Ω–æ–ø–∫–∞ "–°–±—Ä–æ—Å–∏—Ç—å"

## –¢–µ—Å—Ç 2: –ö–Ω–æ–ø–∫–∞ "–°–±—Ä–æ—Å–∏—Ç—å"

17. [ ] –ù–∞–∂–∞—Ç—å "üîÑ –°–±—Ä–æ—Å–∏—Ç—å –∏ –Ω–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ"
18. [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ Stage1/2/3Complete = false
19. [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ TestResults –æ—á–∏—â–µ–Ω—ã
20. [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –º–æ–∂–Ω–æ –Ω–∞—á–∞—Ç—å –Ω–æ–≤—ã–π –∞–Ω–∞–ª–∏–∑ (–∫–Ω–æ–ø–∫–∞ "Analyze" –∞–∫—Ç–∏–≤–Ω–∞)

## –¢–µ—Å—Ç 3: –°—Ü–µ–Ω–∞—Ä–∏–π —Å 0 —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π

21. [ ] –í—ã–±—Ä–∞—Ç—å –∑–∞–≤–µ–¥–æ–º–æ –Ω–µ–≤–µ—Ä–Ω—ã–π EXE (–Ω–∞–ø—Ä–∏–º–µ—Ä, notepad.exe)
22. [ ] –ó–∞–ø—É—Å—Ç–∏—Ç—å Stage1 ‚Üí –¥–æ–∂–¥–∞—Ç—å—Å—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è
23. [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è MessageBox "–°–æ–µ–¥–∏–Ω–µ–Ω–∏—è –Ω–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω—ã" (–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–π)
24. [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ Stage2 –ù–ï –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

## –¢–µ—Å—Ç 4: –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∫–æ–º–∞–Ω–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç

25. [ ] –ó–∞–ø—É—Å—Ç–∏—Ç—å Stage1 –¥–ª—è TestNetworkApp.exe
26. [ ] –ü–æ–∫–∞ –∏–¥—ë—Ç –∑–∞—Ö–≤–∞—Ç –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å:
    - [ ] –ù–∞–∂–∞—Ç—å "Analyze" –ø–æ–≤—Ç–æ—Ä–Ω–æ ‚Üí –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞
    - [ ] –ù–∞–∂–∞—Ç—å "Diagnose" ‚Üí –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞
    - [ ] –ù–∞–∂–∞—Ç—å "Apply Bypass" ‚Üí –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞
27. [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —Ç–æ–ª—å–∫–æ –∫–Ω–æ–ø–∫–∞ "–°–±—Ä–æ—Å–∏—Ç—å" –¥–æ—Å—Ç—É–ø–Ω–∞ (–µ—Å–ª–∏ Stage1+ –∑–∞–≤–µ—Ä—à—ë–Ω)

## –¢–µ—Å—Ç 5: –†–µ–≥—Ä–µ—Å—Å–∏—è –ø—Ä–æ—Ñ–∏–ª—å–Ω–æ–≥–æ —Å—Ü–µ–Ω–∞—Ä–∏—è

28. [ ] –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –Ω–∞ "–í—ã–±–æ—Ä –ø—Ä–æ—Ñ–∏–ª—è" (Star Citizen)
29. [ ] –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å–Ω—É—é –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É
30. [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ —Ä–∞–Ω—å—à–µ (–∫–Ω–æ–ø–∫–∏ –±–ª–æ–∫–∏—Ä—É—é—Ç—Å—è, —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è)
31. [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ Exe-scenario –∏ Profile scenario –Ω–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É—é—Ç

## –¢–µ—Å—Ç 6: Edge cases

32. [ ] –ó–∞–ø—É—Å—Ç–∏—Ç—å –±–µ–∑ admin –ø—Ä–∞–≤ ‚Üí –ø—Ä–æ–≤–µ—Ä–∏—Ç—å MessageBox –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ
33. [ ] –ó–∞–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤–æ –≤—Ä–µ–º—è Stage1 ‚Üí –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ WinDivert handle –æ—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç—Å—è
34. [ ] –ë—ã—Å—Ç—Ä–æ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –º–µ–∂–¥—É Exe –∏ Profile —Å—Ü–µ–Ω–∞—Ä–∏—è–º–∏ ‚Üí –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –Ω–µ—Ç –∫—Ä–∞—à–∞
```

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** –ø–æ—Å–ª–µ –≤—Å–µ—Ö –ø–æ–¥–∑–∞–¥–∞—á 1-7 (—Ñ–∏–Ω–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è)

**–†–∏—Å–∫–∏:** –Ω–µ—Ç

---

## –ò—Ç–æ–≥–æ

**–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–¥–∑–∞–¥–∞—á:** 8

**–ü–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:**

**–ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ (–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π –ø—É—Ç—å):**
1. –ü–æ–¥–∑–∞–¥–∞—á–∞ 1 (command blocking) - **–ü–ï–†–í–ê–Ø** (–±–ª–æ–∫–∏—Ä—É–µ—Ç –≤—Å—ë –æ—Å—Ç–∞–ª—å–Ω–æ–µ)
2. –ü–æ–¥–∑–∞–¥–∞—á–∞ 2 (—É–±—Ä–∞—Ç—å MessageBox) - –ø–æ—Å–ª–µ 1 (–Ω—É–∂–Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞)

**–ú–æ–∂–Ω–æ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ:**
3. –ü–æ–¥–∑–∞–¥–∞—á–∏ 3, 4, 5 (progress bars) - –ø–æ—Å–ª–µ 1, –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã –¥—Ä—É–≥ –æ—Ç –¥—Ä—É–≥–∞
4. –ü–æ–¥–∑–∞–¥–∞—á–∞ 6 (Reset –∫–Ω–æ–ø–∫–∞) - –ø–æ—Å–ª–µ 3,4,5 (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç Stage*Progress)

**–§–∏–Ω–∞–ª–∏–∑–∞—Ü–∏—è:**
5. –ü–æ–¥–∑–∞–¥–∞—á–∞ 7 (XAML) - –ø–æ—Å–ª–µ 3,4,5,6 (–Ω—É–∂–Ω—ã –≤—Å–µ properties)
6. –ü–æ–¥–∑–∞–¥–∞—á–∞ 8 (E2E checklist) - –ø–æ—Å–ª–µ –≤—Å–µ—Ö (–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è)

**–û–ø—Ç–∏–º–∞–ª—å–Ω–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
```
1 ‚Üí 2 ‚Üí (3 + 4 + 5 –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ) ‚Üí 6 ‚Üí 7 ‚Üí 8
```

**–û—Å–Ω–æ–≤–Ω—ã–µ —Ä–∏—Å–∫–∏:**

1. **–ö–æ–Ω—Ñ–ª–∏–∫—Ç —Å –ø—Ä–æ—Ñ–∏–ª—å–Ω—ã–º —Å—Ü–µ–Ω–∞—Ä–∏–µ–º**
   - IsRunning –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –æ–±–æ–∏—Ö —Å—Ü–µ–Ω–∞—Ä–∏—è—Ö
   - –†–µ—à–µ–Ω–∏–µ: –¥–æ–±–∞–≤–∏—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ñ–ª–∞–≥ `_isExeScenarioRunning`, –Ω–µ —Ç—Ä–æ–≥–∞—Ç—å `ScreenState`

2. **Race condition –ø—Ä–∏ –±—ã—Å—Ç—Ä—ã—Ö –∫–ª–∏–∫–∞—Ö**
   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –Ω–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫—É –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –¥–æ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Ñ–ª–∞–≥–∞
   - –†–µ—à–µ–Ω–∏–µ: –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É `if (_isExeScenarioRunning) return;` –≤ –Ω–∞—á–∞–ª–µ Stage –º–µ—Ç–æ–¥–æ–≤

3. **MessageBox –≤ non-UI thread**
   - –ü–æ—Å–ª–µ ConfigureAwait(false) –º–æ–∂–µ–º –±—ã—Ç—å –≤ background thread
   - –†–µ—à–µ–Ω–∏–µ: –≤—Å–µ MessageBox —É–∂–µ –æ–±—ë—Ä–Ω—É—Ç—ã –≤ Dispatcher.InvokeAsync

4. **Progress –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ—Ç–æ—á–Ω—ã–º**
   - Stage1: –∑–∞–≤–∏—Å–∏—Ç –æ—Ç 30-—Å–µ–∫ —Ç–∞–π–º–µ—Ä–∞ (–º–æ–∂–µ—Ç –∑–∞–≤–µ—Ä—à–∏—Ç—å—Å—è —Ä–∞–Ω—å—à–µ)
   - Stage3: –ø–∞—Ä—Å–∏–Ω–≥ —Ç–µ–∫—Å—Ç–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –º–æ–∂–µ—Ç –±—ã—Ç—å —Ö—Ä—É–ø–∫–∏–º
   - –†–µ—à–µ–Ω–∏–µ: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–∏–±–ª–∏–∂—ë–Ω–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è, —ç—Ç–æ UX —É–ª—É—á—à–µ–Ω–∏–µ, –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ

5. **BoolToVisibilityConverter —Å Inverse**
   - –ú–æ–∂–µ—Ç –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å—Å—è –≤ MaterialDesign
   - –†–µ—à–µ–Ω–∏–µ: –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ, —Å–æ–∑–¥–∞—Ç—å —Å–≤–æ–π –µ—Å–ª–∏ –Ω—É–∂–Ω–æ

**–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (–æ—Ü–µ–Ω–∫–∞):**
- Coding: ~50-60 –º–∏–Ω—É—Ç (8 –ø–æ–¥–∑–∞–¥–∞—á √ó 6-8 –º–∏–Ω—É—Ç)
- QA: ~20-30 –º–∏–Ω—É—Ç (E2E —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
- Delivery: ~5 –º–∏–Ω—É—Ç
- **–ò—Ç–æ–≥–æ:** ~1.5 —á–∞—Å–∞

**–≠–∫–æ–Ω–æ–º–∏—è API –ª–∏–º–∏—Ç–æ–≤:**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Claude Haiku –¥–ª—è –ø–æ–¥–∑–∞–¥–∞—á 3,4,5 (–ø—Ä–æ—Å—Ç—ã–µ, –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–µ)
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Claude Sonnet –¥–ª—è –ø–æ–¥–∑–∞–¥–∞—á 1,2,6,7 (—Ç—Ä–µ–±—É—é—Ç –±–æ–ª—å—à–µ –ª–æ–≥–∏–∫–∏)
- –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π (–ø–æ–¥–∑–∞–¥–∞—á–∞ 1 = –≤—Å–µ 3 Stage –º–µ—Ç–æ–¥–∞ —Å—Ä–∞–∑—É)
- –ú–∏–Ω–∏–º–∏–∑–∞—Ü–∏—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø–æ–¥–∑–∞–¥–∞—á: 8 –≤–º–µ—Å—Ç–æ 10-12

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –ø–æ–¥–∑–∞–¥–∞—á:**
- **HIGH:** 1, 2 (–∫—Ä–∏—Ç–∏—á–Ω—ã–µ –¥–ª—è UX)
- **MEDIUM:** 3, 4, 5, 6 (—É–ª—É—á—à–µ–Ω–∏–µ UX)
- **LOW:** 7 (XAML binding), 8 (–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è)

---

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 20 –Ω–æ—è–±—Ä—è 2025 –≥.  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ READY –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ [GREEN] Coding Agent  
**–°–æ–∑–¥–∞–Ω–æ:** [BLUE] Planning Agent

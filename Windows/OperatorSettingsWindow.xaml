<Window x:Class="IspAudit.Windows.OperatorSettingsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        Title="Настройки — Оператор"
        Height="420" Width="560"
        MinHeight="360" MinWidth="520"
        WindowStartupLocation="CenterOwner"
        Background="{DynamicResource MaterialDesignPaper}"
        FontFamily="{DynamicResource MaterialDesignFont}"
        TextElement.Foreground="{DynamicResource MaterialDesignBody}"
        TextElement.FontWeight="Regular"
        TextElement.FontSize="14">

    <Grid Margin="12">
        <Border Style="{StaticResource CardStyle}" Padding="12">
            <StackPanel>
                <TextBlock Text="Настройки" FontSize="18" FontWeight="SemiBold" Margin="0,0,0,10"/>

                <TextBlock Text="Операторский режим использует только безопасные параметры. Инженерные тумблеры доступны в расширенном режиме."
                           Opacity="0.8" TextWrapping="Wrap" Margin="0,0,0,12"/>

                <ToggleButton Content="Автоисправление"
                              Style="{StaticResource BypassToggleButtonStyle}"
                              Height="34" MinWidth="200" Padding="12,0" FontSize="12"
                              IsChecked="{Binding EnableAutoBypass, Mode=TwoWay}"
                              ToolTip="Автоматически применять безопасные исправления при проблемах (без ручного выбора стратегий)."
                              Margin="0,0,0,10"/>

                <ToggleButton Content="Разрешить DNS/DoH"
                              Style="{StaticResource BypassToggleButtonStyle}"
                              Height="34" MinWidth="200" Padding="12,0" FontSize="12"
                              IsChecked="{Binding AllowDnsDohSystemChanges, Mode=OneWay}"
                              PreviewMouseLeftButtonDown="DnsDohConsentToggle_PreviewMouseLeftButtonDown"
                              ToolTip="Явное разрешение на системные изменения DNS/DoH (может менять настройки сети Windows). Без этого DoH из рекомендаций будет пропускаться."
                              Margin="0,0,0,10"/>

                <Button Content="Переключить тему"
                        Style="{StaticResource SecondaryButtonStyle}"
                        Padding="12,6"
                        HorizontalAlignment="Left"
                        Command="{Binding ToggleThemeCommand}"/>

                <Border Height="1" Background="{DynamicResource MaterialDesignDivider}" Margin="0,14,0,12"/>

                <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                    <Button Content="Закрыть"
                            Style="{StaticResource PrimaryButtonStyle}"
                            Padding="16,6"
                            MinWidth="120"
                            Click="Close_Click"/>
                </StackPanel>
            </StackPanel>
        </Border>
    </Grid>
</Window>

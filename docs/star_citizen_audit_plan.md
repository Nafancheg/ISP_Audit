# Адаптация ISP Audit для игроков Star Citizen

## Назначение и текущее состояние
- Приложение выполняет комплекс сетевых тестов (DNS, TCP, HTTP(S), traceroute, UDP, эвристика RST) и формирует JSON-отчёт с рекомендациями.【F:README.md†L3-L91】
- GUI предоставляет управление списком целевых хостов и настройками тестов, но ключевые рекомендации скрыты в небольшом поле, а дефолтные цели не включают сервисы Star Citizen.

## Основные проблемы
1. **Непопадание в пользовательский сценарий**
   - Предустановленный список целей ориентирован на популярные сайты (YouTube, Discord и т.д.), что мало помогает выяснить доступность инфраструктуры Star Citizen.
2. **Недостаточное покрытие игровых сервисов**
   - TCP-проверка ограничена портами 80/443, а UDP-тест затрагивает только 1.1.1.1:53, поэтому специфические порты/протоколы игры остаются непроверенными.
3. **Сложность восприятия результатов**
   - Интерфейс перегружен техническими деталями, лог и таблица шагов отвлекают от итогового диагноза и рекомендаций.
4. **Советы требуют ручных действий**
   - Рекомендации описывают возможные обходы (DoH, VPN и др.), но приложение не помогает применить решения автоматически.

## Предлагаемые улучшения UX
- Вынести краткий диагноз и рекомендации в отдельный крупный блок (или автоматическое модальное окно) сразу после завершения теста.
- Упростить основное окно: спрятать детальный лог и таблицу шагов под переключателем «Расширенный режим», оставить понятную кнопку «Проверить подключение» и индикатор выполнения.
- Перевести термины в пользовательские формулировки («DNS фильтруется», «HTTPS блокируется провайдером») и добавить цветовую кодировку статусов.
- Расширить/уточнить текст советов с бытовыми объяснениями («включите защищённый DNS в Windows 11», «установите VPN, например…»).

## Расширение тестов под Star Citizen
- Добавить в конфигурацию ключевые домены игры (robertsspaceindustries.com, лаунчер, CDN патчей, сервера авторизации и игровых сессий) и пометить их как цели по умолчанию.
- Поддержать дополнительные TCP-порты, которые использует игра, и реализовать отдельный UDP-тест на адреса игровых серверов.
- Усилить диагностику DNS для игровых доменов (выводить явное предупреждение, если системный DNS не возвращает записи или подменяет адреса).
- Предусмотреть экспорт краткого отчёта для техподдержки/сообщества («скопировать итог в буфер»).

## Этап 2: автоматический обход блокировок
- Интегрировать WinDivert для методов обхода DPI (фрагментация TLS ClientHello, блокировка RST-пакетов) по аналогии с GoodbyeDPI.
- Добавить UI-переключатель «Включить обход» с пояснением требований (права администратора, возможное влияние на трафик) и явным индикатором активного режима.
- Ограничить правила WinDivert нужными адресами/портами, чтобы не перехватывать лишний трафик, и обработать ошибки запуска драйвера.
- Рассмотреть частичное проксирование трафика игры (например, через локальный SOCKS5) как расширение для случаев жёсткой IP-блокировки.

## Возможный переход на веб-интерфейс
- Реализовать локальный веб-фронтенд (HTML/CSS/JS) поверх существующей .NET-логики для быстрого прототипирования современного UX и многоязычности.
- Автоматически открывать страницу в браузере или упаковать её в оболочку (Electron/WebView2) для привычного десктопного опыта.

## Следующие шаги
1. Зафиксировать список инфраструктурных узлов Star Citizen и необходимые порты.
2. Переработать GUI с акцентом на итоговые рекомендации и простой сценарий запуска.
3. Расширить тестовый набор и отчётность под игровые сервисы.
4. Спроектировать и внедрить модуль обхода блокировок на базе WinDivert с безопасными настройками.

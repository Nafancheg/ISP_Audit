# Адаптация ISP Audit для игроков Star Citizen

## Назначение и текущее состояние
- Приложение выполняет комплекс сетевых тестов (DNS, TCP, HTTP(S), traceroute, UDP, эвристика RST) и формирует JSON-отчёт с рекомендациями.【F:README.md†L3-L91】
- GUI предоставляет управление списком целевых хостов и настройками тестов, но ключевые рекомендации скрыты в небольшом поле, а дефолтные цели не включают сервисы Star Citizen.

## Основные проблемы
1. **Непопадание в пользовательский сценарий**
   - Встроенный список целей не включает обязательные домены лаунчера, CDN и игровых шлюзов Star Citizen, поэтому диагностика не отвечает на главный вопрос «что мешает игре запуститься».
2. **Недостаточное покрытие игровых сервисов**
   - TCP-проверка ограничена портами 80/443, а UDP-тест затрагивает только 1.1.1.1:53, поэтому специфические порты/протоколы игры остаются непроверенными.
3. **Сложность восприятия результатов**
   - Интерфейс перегружен техническими деталями, лог и таблица шагов отвлекают от итогового диагноза, а блок рекомендаций расположен слишком низко и легко игнорируется.
4. **Советы требуют ручных действий**
   - Рекомендации описывают возможные обходы (DoH, VPN и др.), но приложение не помогает применить решения автоматически.

## Предлагаемые улучшения UX
- Вынести краткий диагноз и рекомендации в отдельный крупный блок (или автоматическое модальное окно) сразу после завершения теста, указать статус (зелёный/жёлтый/красный) и причины выявленных проблем.
- Упростить основное окно: спрятать детальный лог и таблицу шагов под переключателем «Расширенный режим», оставить понятную кнопку «Проверить подключение», прогресс-бар и явный индикатор текущего шага.
- Перевести термины в пользовательские формулировки («DNS фильтруется», «HTTPS блокируется провайдером») и добавить цветовую кодировку статусов с иконками.
- Расширить/уточнить текст советов с бытовыми объяснениями («включите защищённый DNS в Windows 11», «установите VPN, например…») и подсказками по применению.

## Расширение тестов под Star Citizen
- Добавить в конфигурацию ключевые домены игры (robertsspaceindustries.com, лаунчер, CDN патчей, сервера аутентификации и игровых сессий) и сделать их целями по умолчанию, скрыв ручное редактирование в базовом режиме.
- Поддержать дополнительные TCP-порты, которые использует игра, и реализовать отдельные UDP-тесты на адреса игровых серверов с возможностью задавать произвольные порты.
- Усилить диагностику DNS для игровых доменов (выводить явное предупреждение, если системный DNS не возвращает записи или подменяет адреса, подсвечивать расхождения с DoH).
- Предусмотреть экспорт краткого отчёта для техподдержки/сообщества («скопировать итог в буфер», HTML/PDF).

## Этап 2: автоматический обход блокировок
- Интегрировать WinDivert для методов обхода DPI (фрагментация TLS ClientHello, блокировка RST-пакетов) по аналогии с GoodbyeDPI.
- Добавить UI-переключатель «Включить обход» с пояснением требований (права администратора, возможное влияние на трафик), явным индикатором активного режима и подсказками по устранению ошибок.
- Ограничить правила WinDivert нужными адресами/портами, чтобы не перехватывать лишний трафик, и тщательно обработать ошибки запуска драйвера (UAC, несовпадение версий, отсутствие WinDivert.dll).
- Рассмотреть частичное проксирование трафика игры (например, через локальный SOCKS5) как расширение для случаев жёсткой IP-блокировки.

## Возможный переход на веб-интерфейс
- Реализовать локальный веб-фронтенд (HTML/CSS/JS) поверх существующей .NET-логики для быстрого прототипирования современного UX и многоязычности.
- Автоматически открывать страницу в браузере или упаковать её в оболочку (Electron/WebView2) для привычного десктопного опыта.

## Следующие шаги
1. Собрать актуальный список инфраструктурных узлов Star Citizen (лаунчер, CDN, игровые сервера, авторизация) и автоматизировать его обновление.
2. Переработать GUI с акцентом на итоговые рекомендации, понятные статусы и прозрачный прогресс выполнения.
3. Расширить тестовый набор и отчётность под игровые сервисы, добавив нестандартные порты и усиленную DNS-проверку.
4. Спроектировать и внедрить модуль обхода блокировок на базе WinDivert с безопасными настройками и обработкой ошибок.
5. Провести пользовательское тестирование с игроками Star Citizen, скорректировать формулировки и убедиться в видимости итогового отчёта.

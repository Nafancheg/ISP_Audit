# ISP_Audit ‚Äî TODO (—Ç–æ–ª—å–∫–æ –Ω–µ–≤—ã–ø–æ–ª–Ω–µ–Ω–Ω–æ–µ)

–î–∞—Ç–∞: 20.01.2026 (–∞–∫—Ç—É–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–æ)
–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: —Å–ø–∏—Å–æ–∫ –Ω–µ–∑–∞–∫—Ä—ã—Ç—ã—Ö –∑–∞–¥–∞—á –∏ –ø—Ä–æ–±–ª–µ–º. –í—Å—ë –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω–æ–µ –∏ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–æ–µ ‚Äî –≤ CHANGELOG.md –∏ ARCHITECTURE_CURRENT.md.

---

## –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã
- üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π: –≤–ª–∏—è–µ—Ç –Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –¥–µ—Ç–µ–∫—Ü–∏–∏/–æ–±—Ö–æ–¥–∞ –∏–ª–∏ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å —Ä–∞–Ω—Ç–∞–π–º–∞
- üü° –í–∞–∂–Ω—ã–π: –ø–æ–≤—ã—à–∞–µ—Ç —Ç–æ—á–Ω–æ—Å—Ç—å/–Ω–∞–¥—ë–∂–Ω–æ—Å—Ç—å, —Å–Ω–∏–∂–∞–µ—Ç —Ä–∏—Å–∫ —Ä–µ–≥—Ä–µ—Å—Å–∏–π
- üü¢ –ù–∏–∑–∫–∏–π: UX/–ø–æ–ª–∏—à/–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

---

## P0 ‚Äî –°—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏—è –æ–±—Ö–æ–¥–∞ –∏ —Ä–∞–Ω—Ç–∞–π–º–∞ (–ö–†–ò–¢–ò–ß–ï–°–ö–û–ï)

- üî¥ P0.0: –°—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏—è –±—Ä–∞—É–∑–µ—Ä–Ω–æ–≥–æ –∫–µ–π—Å–∞ (YouTube/Google)
  - –¶–µ–ª—å: YouTube –≤–∏–¥–µ–æ —Å—Ç–∞–±–∏–ª—å–Ω–æ —Å—Ç–∞—Ä—Ç—É–µ—Ç –≤ –±—Ä–∞—É–∑–µ—Ä–µ –ø—Ä–∏ –≤–∫–ª—é—á—ë–Ω–Ω–æ–º –æ–±—Ö–æ–¥–µ (–∞–¥–º–∏–Ω, WinDivert –∞–∫—Ç–∏–≤–µ–Ω).
  - Definition of done:
    - –í–∏–¥–µ–æ —Å—Ç–∞—Ä—Ç—É–µ—Ç –±–µ–∑ —Ä—É—á–Ω–æ–≥–æ ¬´—Ç—ã–∫–∞–Ω–∏—è¬ª —Ç—É–º–±–ª–µ—Ä–æ–≤ (–º–∞–∫—Å–∏–º—É–º 1‚Äì2 –æ—Å–º—ã—Å–ª–µ–Ω–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏—è: apply + –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ).
    - –ï—Å—Ç—å –Ω–∞–±–ª—é–¥–∞–µ–º–æ—Å—Ç—å –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –≤–æ–∑–¥–µ–π—Å—Ç–≤–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä —Ä–æ—Å—Ç —Å—á—ë—Ç—á–∏–∫–æ–≤ –¥—Ä–æ–ø–∞ UDP/443 –ø—Ä–∏ QUIC‚ÜíTCP).
    - –ü–æ—Å–ª–µ –∑–∞–∫—Ä—ã—Ç–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è DNS/DoH –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è –≤ –∏—Å—Ö–æ–¥–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ.
  - –ë–ª–∏–∂–∞–π—à–∏–µ —à–∞–≥–∏:
    - –ó–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å 1‚Äì2 —ç—Ç–∞–ª–æ–Ω–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è (–±—Ä–∞—É–∑–µ—Ä/–ø—Ä–æ–≤–∞–π–¥–µ—Ä/–ø—Ä–æ—Ñ–∏–ª—å, QUIC –≤–∫–ª—é—á—ë–Ω/–≤—ã–∫–ª—é—á–µ–Ω).
    - –†–µ–≥—Ä–µ—Å—Å‚Äëbisect: –Ω–∞–π—Ç–∏ –ø–µ—Ä–∏–æ–¥, –∫–æ–≥–¥–∞ ¬´—Ä–∞–±–æ—Ç–∞–ª–æ –ª—É—á—à–µ¬ª, –∏ —Å—Ä–∞–≤–Ω–∏—Ç—å –æ—Ç–ª–∏—á–∏—è –≤ Bypass/TrafficEngine/DNS.
    - –î–æ–±–∞–≤–∏—Ç—å/–æ—Ñ–æ—Ä–º–∏—Ç—å —Ä–µ–∂–∏–º ¬´classic/–º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –Ω–∞–±–æ—Ä¬ª (—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –Ω–∞–±–æ—Ä —Ç–µ—Ö–Ω–∏–∫, –º–∏–Ω–∏–º—É–º –∞–≤—Ç–æ–º–∞—Ç–∏–∫–∏) –¥–ª—è baseline.

- üî¥ P0.0.x: Crash –≤ loop —Ä–∞–Ω—Ç–∞–π–º–∞: `Collection was modified; enumeration operation may not execute`
  - –°–∏–º–ø—Ç–æ–º: –≤ –ª–æ–≥–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è `Loop crashed: Collection was modified; enumeration operation may not execute.`
  - –†–∏—Å–∫: —á–∞—Å—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ –º–æ–∂–µ—Ç ‚Äú–º–æ–ª—á–∞‚Äù –æ—Ç–∫–ª—é—á–∏—Ç—å—Å—è (—Ü–∏–∫–ª —É–ø–∞–ª), –∞ UI –ø—Ä–æ–¥–æ–ª–∂–∏—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å –∂–∏–≤—ã–º.
  - –ü–ª–∞–Ω —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è (high level): –ª–æ–∫–∞–ª–∏–∑–æ–≤–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç/–∫–æ–ª–ª–µ–∫—Ü–∏—é ‚Üí —Å–¥–µ–ª–∞—Ç—å —á—Ç–µ–Ω–∏–µ —á–µ—Ä–µ–∑ snapshot/lock/immutable snapshot (copy-on-write) ‚Üí –¥–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç/–Ω–∞–≥—Ä—É–∑–æ—á–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π.

---

## P0.2 ‚Äî Policy-driven: –Ω–µ–∑–∞–∫—Ä—ã—Ç–æ–µ

- üü° Advanced —Ä–µ–∂–∏–º: —Ä—É—á–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª–∏—Ç–∏–∫ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
  - UI/UX –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ —Ä—É—á–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è FlowPolicy (—Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π –∏ –ø–æ–Ω—è—Ç–Ω—ã–º–∏ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è–º–∏).

- üü° –ó–∞–º–µ—Ä—ã –∏ –ª–∏–º–∏—Ç—ã
  - –ò–∑–º–µ—Ä–∏—Ç—å overhead lookup –≤ decision graph –Ω–∞ hot path.
  - –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø–æ –ø–∞–º—è—Ç–∏/–∫–æ–ª–∏—á–µ—Å—Ç–≤—É –ø–æ–ª–∏—Ç–∏–∫ (cap) –∏ –ø–æ–ª–∏—Ç–∏–∫–∞ –¥–µ–≥—Ä–∞–¥–∞—Ü–∏–∏.
  - –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –ø–µ—Ä–µ–∫–æ–º–ø–∏–ª—è—Ü–∏—è –≥—Ä–∞—Ñ–∞ –±–µ–∑ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ UI.

---

## –°—Ç—Ä–∞—Ç–µ–≥–∏–∏ –æ–±—Ö–æ–¥–∞: –¥–æ–ª–≥–∏/–±–ª–æ–∫–µ—Ä—ã

- üî¥ Bad checksum (2.2): –µ—Å—Ç—å –±–ª–æ–∫–µ—Ä –Ω–∞ —É—Ä–æ–≤–Ω–µ –¥–≤–∏–∂–∫–∞/–∏–Ω–∂–µ–∫—Ç–∞ ‚Äî –æ—Ñ–æ—Ä–º–∏—Ç—å –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω—É—é –∑–∞–¥–∞—á—É —Å –∫—Ä–∏—Ç–µ—Ä–∏—è–º–∏ –ø—Ä–∏—ë–º–∫–∏.
- üü° QUIC obfuscation (2.3): —Å–µ–π—á–∞—Å –ø–æ–∫—Ä—ã–≤–∞–µ—Ç—Å—è QUIC‚ÜíTCP (DROP UDP/443), –Ω–æ –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è/–ø–æ–ª–∏—Ç–∏–∫–∞ —Ç—Ä–µ–±—É–µ—Ç —è–≤–Ω–æ–≥–æ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è.
- üü° HTTP Host tricks: –±–∞–∑–æ–≤–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –µ—Å—Ç—å –≤ —Ñ–∏–ª—å—Ç—Ä–µ, –Ω–æ –Ω–µ—Ç –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –≤ semantics/–Ω–∞–±–ª—é–¥–∞–µ–º–æ—Å—Ç—å –∫–∞–∫ —É–ø—Ä–∞–≤–ª—è–µ–º–æ–π –ø–æ–ª–∏—Ç–∏–∫–∏.
- üü° Auto-hostlist: –ø–æ–¥–∫–ª—é—á—ë–Ω –∫–∞–∫ –∫–æ–Ω—Ç–µ–∫—Å—Ç, –Ω–æ –ø–æ–∫–∞ –Ω–µ –≤–ª–∏—è–µ—Ç –Ω–∞ –ø–æ—Å—Ç–∞–Ω–æ–≤–∫—É –¥–∏–∞–≥–Ω–æ–∑–∞/–ø–ª–∞–Ω–∞.

---

## –§–∞–∑–∞ 4 ‚Äî –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –∏ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –¥–æ–ª–≥ (Q1 2026)

- üü° –î–æ–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ/–≤–µ—Å–∞ –ø–ª–∞–Ω–æ–≤ v2
  - –ï—Å–ª–∏ –ø–ª–∞–Ω A –∞–∫—Ç–∏–≤–µ–Ω, –ø–ª–∞–Ω—ã B –≥–¥–µ B ‚äÇ A –Ω–µ —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞—é—Ç—Å—è.
  - –†–∞–∑–¥–µ–ª–∏—Ç—å —Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ strength/cost –∏ —É—á–∏—Ç—ã–≤–∞—Ç—å feedback (—É—Å–ø–µ—Ö/–ø—Ä–æ–≤–∞–ª).

- üü° DI container
  - –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ Microsoft.Extensions.DependencyInjection; —É—Ö–æ–¥ –æ—Ç —Ä—É—á–Ω–æ–≥–æ wiring.

- üü° –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è
  - –ü–µ—Ä–µ–≤–µ—Å—Ç–∏ Config.ActiveProfile/Program.Targets –≤ —Å–µ—Ä–≤–∏—Å—ã.

- üü° –î–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏—è DiagnosticOrchestrator (—Å–ª–µ–¥—É—é—â–∏–π —à–∞–≥ –ø–æ—Å–ª–µ partial)
  - –í—ã–¥–µ–ª–µ–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤: Pipeline / Recommendations / CardActions / State.

---

## –§–∞–∑–∞ 5 ‚Äî Native Core (Rust DLL) (Q2 2026)

- üü¢ 5.0: –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ Rust
  - 5.0.3: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å MSBuild –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Å–±–æ—Ä–∫–∏ Rust DLL –ø—Ä–∏ `dotnet build`.
  - 5.0.4: –î–æ–±–∞–≤–∏—Ç—å –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ `isp_audit_native.dll` –≤ output directory.

- üü° 5.1: WinDivert FFI –æ–±—ë—Ä—Ç–∫–∞ –Ω–∞ Rust
  - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `DivertIpHdr`, `DivertTcpHdr`.
  - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `divert_calc_checksums` —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π –±—É—Ñ–µ—Ä–∞.
  - –°–æ–∑–¥–∞—Ç—å `WinDivertNativeRust.cs` + feature flag –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Å—Ç–∞—Ä—ã–π/–Ω–æ–≤—ã–π interop.

- üü° 5.2: Packet parser –Ω–∞ Rust
  - Zero-copy –ø–∞—Ä—Å–∏–Ω–≥ IP/TCP/UDP —Å bounds checking –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π –≤ hot path.

- üü¢ 5.3: TLS/SNI parser –Ω–∞ Rust
  - –ë–µ–∑–æ–ø–∞—Å–Ω—ã–π –ø–∞—Ä—Å–∏–Ω–≥ ClientHello + –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ SNI.

- üü¢ 5.4: –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ ‚Äî –≤—ã–¥–µ–ª–∏—Ç—å bypass –≤ –æ—Ç–¥–µ–ª—å–Ω—É—é .NET DLL

